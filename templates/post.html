{% extends "flatpages/default.html" %}
{% load i18n %}
{% load tz %}

{% block title %}
    {{ post.title }}
{% endblock title %}

{% block content %}
<h1>{{ post.title }}</h1>
<p>{{ post.text|safe }}</p>

<hr>

{% if user.is_authenticated %}
    {% if user_liked_post %}
        <a class="btn btn-sm btn-outline-danger"
           href="{% url 'unlike_post' post.id %}">游눖 햒햠햟혝혧 햩햟햧햨</a>
    {% else %}
        <a class="btn btn-sm btn-outline-success"
           href="{% url 'like_post' post.id %}">仇벒잺 햍햟햧햨햫혞혝혧</a>
    {% endif %}
    {% if user_disliked_post %}
        <a class="btn btn-sm btn-outline-secondary ms-2"
           href="{% url 'undislike_post' post.id %}">游뛂 햒햠햟혝혧 햢햦향햩햟햧햨</a>
    {% else %}
        <a class="btn btn-sm btn-outline-dark ms-2"
           href="{% url 'dislike_post' post.id %}">游녩 햆햦향햩햟햧햨햫혞혝혧</a>
    {% endif %}
{% endif %}

<p class="mt-2">
    <strong>햍햟햧햨쮏:</strong> {{ post.get_likes_count }}
    <strong>햆햦향햩햟햧햨쮏:</strong> {{ post.get_dislikes_count }}
</p>

<h2 class="mt-4">햌쮏쨿쨿왏쫨햟햦햦:</h2>
<ul class="list-unstyled">
    {% for comment in comments %}
        <li class="mb-3">
            <strong>{{ comment.commentUser.username }}</strong>:
            {{ comment.text }}<br>
            <small class="text-muted">햆쮏쐃썛쒫햣햫: {{ comment.creationDate }}</small><br>

            {% if user.is_authenticated %}
                {# --- 햩햟햧햨 햨쮏쨿쨿왏쫨햟햦혪 --- #}
                {% if comment.user_liked_current %}
                    <a class="btn btn-sm btn-outline-danger"
                     href="{% url 'unlike_comment' comment.id %}">游눖 햒햠햟혝혧 햩햟햧햨</a>
                {% else %}
                     <a class="btn btn-sm btn-outline-success"
                     href="{% url 'like_comment' comment.id %}">仇벒잺 햍햟햧햨햫혞혝혧</a>
                {% endif %}

                {# --- 햢햦향햩햟햧햨 햨쮏쨿쨿왏쫨햟햦혪 --- #}
                {% if comment.user_disliked_current %}
                  <a class="btn btn-sm btn-outline-secondary ms-2"
                     href="{% url 'undislike_comment' comment.id %}">游뛂 햒햠햟혝혧 햢햦향햩햟햧햨</a>
                {% else %}
                  <a class="btn btn-sm btn-outline-dark ms-2"
                     href="{% url 'dislike_comment' comment.id %}">游녩 햆햦향햩햟햧햨햫혞혝혧</a>
                 {% endif %}
            {% endif %}
            <p class="mt-2">
                <strong>햍햟햧햨쮏:</strong> {{ comment.get_likes_count }} |
                <strong>햆햦향햩햟햧햨쮏:</strong> {{ comment.get_dislikes_count }}
            </p>
        </li>
    {% empty %}
        <p>햌쮏쨿쨿왏쫨햟햦햣 쮏쥃 햫햣혝.</p>
    {% endfor %}
</ul>

{% if user.is_authenticated %}
<form class="mt-4" action="{% url 'create_comment' post.pk %}" method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <button class="btn btn-primary" type="submit">햆쮏쐃썛쒫쟴혧 햨쮏쨿쨿왏쫨햟햦햧</button>
</form>
{% else %}
<p><em>{% trans '햑쮏혧햨 향햟햣햡햦혜혝햦쮏쒫썛쫧쫨햣 쮏혧향쮏쒫썜햣햩햦 햪쮏혞혝 쮐혝햟쒫혪혝혧 햨쮏쨿쨿왏쫨햟햦햦 햦 햩햟햧햨햦.' %}</em></p>
{% endif %}
{% endblock content %}
