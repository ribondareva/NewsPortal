{% extends "flatpages/default.html" %}
{% load i18n %}
{% load tz %}

{% block title %}
    {{ post.title }}
{% endblock title %}

{% block content %}
<h1>{{ post.title }}</h1>
<p>{{ post.text|safe }}</p>

<hr>

{% if user.is_authenticated %}
    {% if user_liked_post %}
        <a class="btn btn-sm btn-outline-danger"
           href="{% url 'unlike_post' post.id %}">üíî –£–±—Ä–∞—Ç—å –ª–∞–π–∫</a>
    {% else %}
        <a class="btn btn-sm btn-outline-success"
           href="{% url 'like_post' post.id %}">‚ù§Ô∏è –õ–∞–π–∫–Ω—É—Ç—å</a>
    {% endif %}
{% endif %}

<p class="mt-2"><strong>–õ–∞–π–∫–æ–≤:</strong> {{ post.get_likes_count }}</p>

<h2 class="mt-4">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏:</h2>
<ul class="list-unstyled">
    {% for comment in comments %}
        <li class="mb-3">
            <strong>{{ comment.commentUser.username }}</strong>:
            {{ comment.text }}<br>
            <small class="text-muted">–î–æ–±–∞–≤–ª–µ–Ω–æ: {{ comment.creationDate }}</small><br>

            {% if user.is_authenticated %}
                {% if comment.user_liked_current %}
                    <a class="btn btn-sm btn-outline-danger"
                       href="{% url 'unlike_comment' comment.id %}">üíî –£–±—Ä–∞—Ç—å –ª–∞–π–∫</a>
                {% else %}
                    <a class="btn btn-sm btn-outline-success"
                       href="{% url 'like_comment' comment.id %}">‚ù§Ô∏è –õ–∞–π–∫–Ω—É—Ç—å</a>
                {% endif %}
            {% endif %}
            <p class="d-inline-block mb-0 ms-2">
                <strong>–õ–∞–π–∫–æ–≤:</strong> {{ comment.get_likes_count }}
            </p>
        </li>
    {% empty %}
        <p>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –ø–æ–∫–∞ –Ω–µ—Ç.</p>
    {% endfor %}
</ul>

{% if user.is_authenticated %}
<form class="mt-4" action="{% url 'create_comment' post.pk %}" method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <button class="btn btn-primary" type="submit">–î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</button>
</form>
{% else %}
<p><em>{% trans '–¢–æ–ª—å–∫–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –æ—Å—Ç–∞–≤–ª—è—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ –ª–∞–π–∫–∏.' %}</em></p>
{% endif %}
{% endblock content %}
